# Taller Individual  3
## Reactive Stream

**Semana**: 9

**Objetivos**:

- Aplicar los conocimientos sobre Reactive Stream.
- Generar y procesar flujos de datos reactivos.



### Descripci√≥n:

Resuelva los siguientes problemas.

### Problema 1
**Sincronizaci√≥n de Sensores**

Descripci√≥n: Simula dos sensores que emiten valores peri√≥dicos:

- Sensor1: Rango [20¬∞C, 30¬∞C], cada 1 segundo.
- Sensor2: Rango [30¬∞C, 40¬∞C], cada 1.5 segundos.
- Usa zip para combinar los valores de ambos sensores en un solo flujo.
- Det√©n el flujo despu√©s de 10 pares de valores.
- Genera una alerta si la diferencia absoluta entre las lecturas de Sensor1 y Sensor2 es mayor a 5¬∞C.
  

```mathematica
Sensor1: 22¬∞C, Sensor2: 27¬∞C, Difference: 5¬∞C
Sensor1: 24¬∞C, Sensor2: 34¬∞C, Difference: 10¬∞C
üö® ALERT! Significant difference detected: 10¬∞C
```

```Scala
package bim2_Semana9

import rx.lang.scala.Observable
import scala.concurrent.duration._
import scala.util.Random

object Sensores extends App {

  // SENSOR 1: Emite un valor entre 20 y 30 cada 1 segundo
  val sensor1 =
    Observable.interval(1.second)
      .map(_ => Random.nextInt(11) + 20) // 20 a 30

  // SENSOR 2: Emite un valor entre 30 y 40 cada 1.5 segundos
  val sensor2 =
    Observable.interval(1.5.second)
      .map(_ => Random.nextInt(11) + 30) // 30 a 40

  // ZIP: Empareja valores cuando ambos sensores emiten
  val pares =
    sensor1.zip(sensor2)

  pares
    .take(10) // solo 10 pares

    // Calculamos diferencia y devolvemos tupla
    .map { case (t1, t2) =>
      val diferencia = math.abs(t1 - t2)
      (t1, t2, diferencia)
    }

    // Mostramos SIEMPRE cada lectura
    .doOnNext { case (t1, t2, diferencia) =>
      println(s"Sensor1: $t1¬∞C, Sensor2: $t2¬∞C, Difference: $diferencia¬∞C")
    }

    // Si la diferencia es mayor a 5, se genera alerta
    .filter { case (_, _, diferencia) => diferencia > 5 }

    // Construimos mensaje de alerta
    .map { case (_, _, diferencia) =>
      s"üö® ALERT! Significant difference detected: ${diferencia}¬∞C"
    }

    // Se imprimen SOLO alertas
    .subscribe(
      alerta => println(alerta),
      error => println(s"Error: ${error.getMessage}"),
      () => println("Monitoring completed.")
    )

  // Tiempo para que todo pueda ejecutarse
  Thread.sleep(20000)
}
```
Resultado:
<img width="498" height="633" alt="image" src="https://github.com/user-attachments/assets/a441e4e7-0388-42a5-8ca5-1bbae3b04505" />



### Problema 2
**Sistema de Alerta Complejo**

Descripci√≥n: Simula tres sensores que emiten datos peri√≥dicos:

- Sensor1: Temperatura (20¬∞C a 30¬∞C).
- Sensor2: Humedad (40% a 60%).
- Sensor3: Presi√≥n (950 hPa a 1050 hPa).
- Combina los datos de los tres sensores y detecta si alguna de las m√©tricas est√° fuera de rango.
- Det√©n el flujo despu√©s de 20 combinaciones.

```yaml
Temperature: 22¬∞C, Humidity: 50%, Pressure: 970 hPa
Temperature: 25¬∞C, Humidity: 42%, Pressure: 1055 hPa
üö® ALERT! Pressure out of range: 1055 hPa
...
```

```Scala
package bim2_Semana9

import rx.lang.scala.Observable
import scala.concurrent.duration._
import scala.util.Random

object Alerta extends App {

  // SENSOR 1: Temperatura 20‚Äì30
  val tempSensor =
    Observable.interval(1.second)
      .map(_ => 20 + Random.nextInt(11))

  // SENSOR 2: Humedad 40‚Äì60
  val humSensor =
    Observable.interval(1100.millis)
      .map(_ => 40 + Random.nextInt(21))

  // SENSOR 3: Presi√≥n 950‚Äì1050
  val presSensor =
    Observable.interval(1500.millis)
      .map(_ => 950 + Random.nextInt(101))


  // COMBINAR LOS 3 SENSORES 
  val combinacion =
    tempSensor
      .zip(humSensor)     // (t, h)
      .zip(presSensor)    // ((t, h), p)
      .map { case ((t, h), p) => (t, h, p) } // lo aplanamos
      .take(20)


  combinacion
    .doOnNext { case (t, h, p) =>
      println(s"Temperature: $t¬∞C | Humidity: $h% | Pressure: $p hPa")
    }
    .filter { case (t, h, p) =>
      t < 20 || t > 30 || h < 40 || h > 60 || p < 950 || p > 1050
    }
    .map { case (t, h, p) =>
      if (t < 20 || t > 30) s"üö® ALERT! Temperature out of range: $t¬∞C"
      else if (h < 40 || h > 60) s"üö® ALERT! Humidity out of range: $h%"
      else s"üö® ALERT! Pressure out of range: $p hPa"
    }
    .subscribe(
      msg => println(msg),
      err => println(s"Error: ${err.getMessage}"),
      ()  => println("‚úì Monitoring finished")
    )

  Thread.sleep(30000)
}

```

Resultado:
<img width="563" height="629" alt="image" src="https://github.com/user-attachments/assets/18b921f6-49d5-4125-a269-51ff58a2f53f" />

### Calificaci√≥n:

Para la calificaci√≥n, se debe presentar el trabajo realizado a su tutor. Es necesario recalcar que la presentaci√≥n se hace una √∫nica vez, no existe la posibilidad de presentaciones adicionales con correcciones.

- 10 puntos si presenta en el horario de pr√°cticas y experimentaci√≥n.
- 7 puntos presenta en el horario de tutor√≠a

La hora m√°xima de presentaci√≥n ser√° las 08h30
